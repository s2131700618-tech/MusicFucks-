-- ğŸš€ LuaWare é¢¨æ ¼å½©è‰²æ¨™é¡Œ + å·¦å´é–‹é—œ + æ•¸å€¼å³æ™‚åŒæ­¥
local Player = game:GetService("Players").LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local RunService = game:GetService("RunService")

-- 1. éŸ³æ¨‚ç‰©ä»¶è¨­å®š
local sound = Player:FindFirstChild("FinalSound") or Instance.new("Sound")
sound.Name = "FinalSound"
sound.Looped = true -- é è¨­é–‹å•Ÿå¾ªç’°æ’­æ”¾
sound.Parent = Player

-- 2. å»ºç«‹ UI å®¹å™¨
local sg = Instance.new("ScreenGui", PlayerGui)
sg.Name = "MusicControl_LuaWareStyle"
sg.ResetOnSpawn = false
sg.DisplayOrder = 100000

-- --- ä¸»é¢æ¿ (Frame) ---
local frame = Instance.new("Frame", sg)
frame.Size = UDim2.new(0, 360, 0, 260)
frame.Position = UDim2.new(0.5, -180, 0.5, -130)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25) -- æ·±è‰²èƒŒæ™¯æ›´é¡¯å½©è‰²
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Visible = true 

-- ğŸŒˆ å½©è‰²æ¨™é¡Œ (LuaWare Style)
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 35)
title.Text = "Ultra éŸ³æ¨‚æ§åˆ¶å™¨ V5"
title.TextSize = 24
title.Font = Enum.Font.SourceSansBold
title.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
title.BorderSizePixel = 0

-- å•Ÿå‹• RGB å¾ªç’°è…³æœ¬
task.spawn(function()
    while true do
        for i = 0, 1, 0.01 do
            title.TextColor3 = Color3.fromHSV(i, 0.8, 1) -- HSV å¾ªç’°ç”¢ç”Ÿå½©è™¹è‰²
            task.wait(0.03)
        end
    end
end)

-- è¼¸å…¥æ¡†ç”Ÿæˆå™¨
local function createInput(name, pos, default)
    local label = Instance.new("TextLabel", frame)
    label.Size = UDim2.new(0, 60, 0, 30)
    label.Position = UDim2.new(0, 15, 0, pos)
    label.Text = name
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.BackgroundTransparency = 1

    local box = Instance.new("TextBox", frame)
    box.Size = UDim2.new(0, 240, 0, 30)
    box.Position = UDim2.new(0, 85, 0, pos)
    box.Text = default
    box.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    box.TextColor3 = Color3.fromRGB(255, 255, 255)
    box.ClearTextOnFocus = false -- é»æ“Šä¸æ¶ˆå¤±
    return box
end

local idBox = createInput("ID:", 50, "")
local volBox = createInput("éŸ³é‡:", 90, "1")
local spdBox = createInput("é€Ÿåº¦:", 130, "1")

-- ğŸ”„ å¾ªç’°åˆ‡æ›æŒ‰éˆ•
local loopBtn = Instance.new("TextButton", frame)
loopBtn.Size = UDim2.new(0.9, 0, 0, 30)
loopBtn.Position = UDim2.new(0.05, 0, 0, 170)
loopBtn.BackgroundColor3 = Color3.fromRGB(40, 120, 40)
loopBtn.Text = "ğŸ”„ å¾ªç’°æ’­æ”¾: é–‹å•Ÿ"
loopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)

-- â–¶ï¸ æ’­æ”¾æŒ‰éˆ•
local playBtn = Instance.new("TextButton", frame)
playBtn.Size = UDim2.new(0.9, 0, 0, 40)
playBtn.Position = UDim2.new(0.05, 0, 0, 210)
playBtn.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
playBtn.Text = "â–¶ï¸ æ’­æ”¾ / åœæ­¢"
playBtn.TextColor3 = Color3.fromRGB(255, 255, 255)

-- 3. åŠŸèƒ½åŒæ­¥
local function sync()
    local v = tonumber(volBox.Text) or 1
    local s = tonumber(spdBox.Text) or 1
    sound.Volume = math.clamp(v, 0, 99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999)
    sound.PlaybackSpeed = math.clamp(s, 0, 100)
end

loopBtn.Activated:Connect(function()
    sound.Looped = not sound.Looped
    loopBtn.Text = sound.Looped and "ğŸ”„ å¾ªç’°æ’­æ”¾: é–‹å•Ÿ" or "âŒ å¾ªç’°æ’­æ”¾: é—œé–‰"
    loopBtn.BackgroundColor3 = sound.Looped and Color3.fromRGB(40, 120, 40) or Color3.fromRGB(120, 40, 40)
end)

volBox:GetPropertyChangedSignal("Text"):Connect(sync)
spdBox:GetPropertyChangedSignal("Text"):Connect(sync)

playBtn.Activated:Connect(function()
    if sound.IsPlaying then
        sound:Stop()
    else
        local id = idBox.Text:match("%d+")
        if id then
            sound.SoundId = "rbxassetid://" .. id
            sync()
            sound:Play()
        end
    end
end)

-- --- 4. å·¦å´é–‹é—œæŒ‰éˆ• (ç½®é ‚) ---
local openBtn = Instance.new("TextButton", sg)
openBtn.Size = UDim2.new(0, 50, 0, 50)
openBtn.Position = UDim2.new(0, 10, 0.5, -25)
openBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
openBtn.BackgroundTransparency = 0.4
openBtn.Text = "ğŸµ"
openBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
openBtn.TextSize = 30
openBtn.ZIndex = 100000 
Instance.new("UICorner", openBtn)

openBtn.Activated:Connect(function()
    frame.Visible = not frame.Visible
    openBtn.BackgroundColor3 = frame.Visible and Color3.fromRGB(0, 0, 0) or Color3.fromRGB(0, 170, 255)
end)

print("âœ… å½©è‰²æ¨™é¡Œå·²å•Ÿå‹•ï¼å»æ„Ÿå— LuaWare çš„æ°›åœå§ï¼")
